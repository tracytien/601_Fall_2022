{
  "hash": "76ac39e95428883444ea56779bab61d0",
  "result": {
    "markdown": "---\ntitle: \"Challenge 2\"\nauthor: \"Tracy Tien\"\ndesription: \"Data wrangling: using group() and summarise()\"\ndate: \"What is time these days?\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_2\n  - faostat\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Challenge Overview\n\nToday's challenge is to\n\n1)  read in a data set, and describe the data using both words and any supporting information (e.g., tables, etc)\n2)  provide summary statistics for different interesting groups within the data, and interpret those statistics\n\n## Read in the Data\n\n-   FAOSTAT_livestock.csv\n\nI will read in the data and do a series of \"poking around\" (commented out in the code below) to get a sense of the dataset, and return a more concise version of the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nFAOstat <- read_csv(\"_data/FAOSTAT_livestock.csv\")\n# I'm doing a series of \"poking around\" after reading in the data (commented out) to get a sense of the dataset.\n# spec(FAOstat)\n# dim(FAOstat) showed that FAOSTAT_livestock has 82116 records and 14 rows. \n# colnames(FAOstat)\nhead(FAOstat)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 14\n  Domai…¹ Domain Area …² Area  Eleme…³ Element Item …⁴ Item  Year …⁵  Year Unit \n  <chr>   <chr>    <dbl> <chr>   <dbl> <chr>     <dbl> <chr>   <dbl> <dbl> <chr>\n1 QA      Live …       2 Afgh…    5111 Stocks     1107 Asses    1961  1961 Head \n2 QA      Live …       2 Afgh…    5111 Stocks     1107 Asses    1962  1962 Head \n3 QA      Live …       2 Afgh…    5111 Stocks     1107 Asses    1963  1963 Head \n4 QA      Live …       2 Afgh…    5111 Stocks     1107 Asses    1964  1964 Head \n5 QA      Live …       2 Afgh…    5111 Stocks     1107 Asses    1965  1965 Head \n6 QA      Live …       2 Afgh…    5111 Stocks     1107 Asses    1966  1966 Head \n# … with 3 more variables: Value <dbl>, Flag <chr>, `Flag Description` <chr>,\n#   and abbreviated variable names ¹​`Domain Code`, ²​`Area Code`,\n#   ³​`Element Code`, ⁴​`Item Code`, ⁵​`Year Code`\n```\n:::\n\n```{.r .cell-code}\n#install.packages(\"dplyr\")\n# I want to keep the descriptive columns instead of their corresponding codes.\ncodevars <- names(FAOstat) %in% c(\"Domain Code\", \"Area Code\", \"Element Code\", \"Item Code\", \"Year Code\")\nFAOStat_NoCodes <- FAOstat[!codevars]\nFAOStat_NoCodes\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 82,116 × 9\n   Domain       Area        Element Item   Year Unit    Value Flag  Flag Descr…¹\n   <chr>        <chr>       <chr>   <chr> <dbl> <chr>   <dbl> <chr> <chr>       \n 1 Live Animals Afghanistan Stocks  Asses  1961 Head  1300000 <NA>  Official da…\n 2 Live Animals Afghanistan Stocks  Asses  1962 Head   851850 <NA>  Official da…\n 3 Live Animals Afghanistan Stocks  Asses  1963 Head  1001112 <NA>  Official da…\n 4 Live Animals Afghanistan Stocks  Asses  1964 Head  1150000 F     FAO estimate\n 5 Live Animals Afghanistan Stocks  Asses  1965 Head  1300000 <NA>  Official da…\n 6 Live Animals Afghanistan Stocks  Asses  1966 Head  1200000 <NA>  Official da…\n 7 Live Animals Afghanistan Stocks  Asses  1967 Head  1200000 <NA>  Official da…\n 8 Live Animals Afghanistan Stocks  Asses  1968 Head  1328000 <NA>  Official da…\n 9 Live Animals Afghanistan Stocks  Asses  1969 Head  1250000 <NA>  Official da…\n10 Live Animals Afghanistan Stocks  Asses  1970 Head  1300000 <NA>  Official da…\n# … with 82,106 more rows, and abbreviated variable name ¹​`Flag Description`\n```\n:::\n:::\n\n\n## Describe the data\n\nThe FAOSTAT_livestock data contains information for 253 United Nations Food & Agriculture Organization countries, on livestock animals such as asses (donkeys?), buffaloes, camels, cattle, goats, horses, mules, pigs, and sheep (measured in heads.) The temporal coverage is from 1961-2018. The data were likely reported by the country (based on the \"Flag Description\" field denoting as \"offical data\") or estimated by the FAO (\"FAO estimate\".)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn_distinct(select(FAOStat_NoCodes, \"Area\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 253\n```\n:::\n\n```{.r .cell-code}\n# table(select(FAOStat_NoCodes,\"Element\"))\ntable(select(FAOStat_NoCodes, \"Item\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nItem\n    Asses Buffaloes    Camels    Cattle     Goats    Horses     Mules      Pigs \n     8571      3505      3265     13086     12498     11104      6153     12015 \n    Sheep \n    11919 \n```\n:::\n\n```{.r .cell-code}\ntable(select(FAOStat_NoCodes, \"Year\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nYear\n1961 1962 1963 1964 1965 1966 1967 1968 1969 1970 1971 1972 1973 1974 1975 1976 \n1327 1327 1327 1328 1329 1341 1340 1340 1340 1340 1339 1340 1340 1338 1338 1336 \n1977 1978 1979 1980 1981 1982 1983 1984 1985 1986 1987 1988 1989 1990 1991 1992 \n1336 1337 1338 1338 1338 1337 1337 1339 1344 1344 1344 1344 1343 1360 1361 1488 \n1993 1994 1995 1996 1997 1998 1999 2000 2001 2002 2003 2004 2005 2006 2007 2008 \n1497 1497 1497 1497 1497 1497 1497 1502 1502 1502 1502 1502 1502 1506 1506 1506 \n2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 \n1506 1506 1506 1513 1513 1513 1513 1513 1513 1513 \n```\n:::\n:::\n\n\n## Provide Grouped Summary Statistics\n\nConduct some exploratory data analysis, using dplyr commands such as `group_by()`, `select()`, `filter()`, and `summarise()`. Find the central tendency (mean, median, mode) and dispersion (standard deviation, mix/max/quantile) for different subgroups within the data set.\n\nI first grouped the data by Item (which denotes what type of livestock) and found the average for each, then I sorted them in descending order (using tally and sort). I was able to show for each country and each item, then it occurred to me that it would be interesting to just see the top producing livestock for each country. This then allows us to see the difference between the overall trend for all FAO countries, and how countries differ from that (even by how much.) Future questions might be to compare by year.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# make a cleaner data to make a summary table, this can also be done with select()\ncodevars1 <- names(FAOstat) %in% c(\"Domain\", \"Domain Code\",\"Area Code\", \"Element\", \"Element Code\", \"Item Code\", \"Unit\", \"Year Code\", \"Flag\", \"Flag Description\")\nFAOStat_cleaned <- FAOstat[!codevars1]\nFAOStat_cleaned\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 82,116 × 4\n   Area        Item   Year   Value\n   <chr>       <chr> <dbl>   <dbl>\n 1 Afghanistan Asses  1961 1300000\n 2 Afghanistan Asses  1962  851850\n 3 Afghanistan Asses  1963 1001112\n 4 Afghanistan Asses  1964 1150000\n 5 Afghanistan Asses  1965 1300000\n 6 Afghanistan Asses  1966 1200000\n 7 Afghanistan Asses  1967 1200000\n 8 Afghanistan Asses  1968 1328000\n 9 Afghanistan Asses  1969 1250000\n10 Afghanistan Asses  1970 1300000\n# … with 82,106 more rows\n```\n:::\n\n```{.r .cell-code}\n# summary of cleaner data\nlibrary(summarytools)\nprint(dfSummary(FAOStat_cleaned))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nData Frame Summary  \nFAOStat_cleaned  \nDimensions: 82116 x 4  \nDuplicates: 0  \n\n-----------------------------------------------------------------------------------------------------------------------\nNo   Variable      Stats / Values                    Freqs (% of Valid)      Graph                 Valid      Missing  \n---- ------------- --------------------------------- ----------------------- --------------------- ---------- ---------\n1    Area          1. Africa                           522 ( 0.6%)                                 82116      0        \n     [character]   2. Asia                             522 ( 0.6%)                                 (100.0%)   (0.0%)   \n                   3. China, mainland                  522 ( 0.6%)                                                     \n                   4. Eastern Africa                   522 ( 0.6%)                                                     \n                   5. Eastern Asia                     522 ( 0.6%)                                                     \n                   6. Eastern Europe                   522 ( 0.6%)                                                     \n                   7. Egypt                            522 ( 0.6%)                                                     \n                   8. Europe                           522 ( 0.6%)                                                     \n                   9. India                            522 ( 0.6%)                                                     \n                   10. Northern Africa                 522 ( 0.6%)                                                     \n                   [ 243 others ]                    76896 (93.6%)           IIIIIIIIIIIIIIIIII                        \n\n2    Item          1. Asses                           8571 (10.4%)           II                    82116      0        \n     [character]   2. Buffaloes                       3505 ( 4.3%)                                 (100.0%)   (0.0%)   \n                   3. Camels                          3265 ( 4.0%)                                                     \n                   4. Cattle                         13086 (15.9%)           III                                       \n                   5. Goats                          12498 (15.2%)           III                                       \n                   6. Horses                         11104 (13.5%)           II                                        \n                   7. Mules                           6153 ( 7.5%)           I                                         \n                   8. Pigs                           12015 (14.6%)           II                                        \n                   9. Sheep                          11919 (14.5%)           II                                        \n\n3    Year          Mean (sd) : 1990.4 (16.8)         58 distinct values      . . .   . :   : : :   82116      0        \n     [numeric]     min < med < max:                                          : : : . : : : : : :   (100.0%)   (0.0%)   \n                   1961 < 1991 < 2018                                        : : : : : : : : : :                       \n                   IQR (CV) : 29 (0)                                         : : : : : : : : : :                       \n                                                                             : : : : : : : : : :                       \n\n4    Value         Mean (sd) : 11625569 (64779790)   43667 distinct values   :                     80815      1301     \n     [numeric]     min < med < max:                                          :                     (98.4%)    (1.6%)   \n                   0 < 224667 < 1489744504                                   :                                         \n                   IQR (CV) : 2364200 (5.6)                                  :                                         \n                                                                             :                                         \n-----------------------------------------------------------------------------------------------------------------------\n```\n:::\n\n```{.r .cell-code}\n# group by the type of livestock (= Item)\nby_item <- FAOStat_cleaned %>% group_by(Item)\n\n#by_item %>% tally(sort = TRUE) \n#by_item %>%\n  #summarize(avg_value = mean(Value, na.rm=TRUE)) \n\n\n#For each country, group by item, and show the top average value livestock for each country.\nitem_by_area <- FAOStat_cleaned %>%\n  group_by(Area, Item) %>%\n  summarize(mean_value = mean(Value, na.rm =TRUE),\n            median_value = median(Value, na.rm = TRUE)) %>%\n  top_n(1)\n\nitem_by_area\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 256 × 4\n# Groups:   Area [253]\n   Area                Item   mean_value median_value\n   <chr>               <chr>       <dbl>        <dbl>\n 1 Afghanistan         Sheep   15397675.    14185000 \n 2 Africa              Sheep  226054195.   205408754.\n 3 Albania             Sheep    1623645.     1664250 \n 4 Algeria             Sheep   15573059.    16974215 \n 5 American Samoa      Pigs       10659.       10500 \n 6 Americas            Cattle 431297713.   432220557 \n 7 Angola              Cattle   3339982.     3200000 \n 8 Antigua and Barbuda Cattle     11211.       13327 \n 9 Argentina           Cattle  52116560.    52569504 \n10 Armenia             Sheep     612495.      580178 \n# … with 246 more rows\n```\n:::\n:::\n\n\n### Explain and Interpret\n\nPlease see above section.",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}